import callfunc from "call-func";

var getDateObject = function getDateObject(t) {
  return null != t ? new Date(t) : new Date();
};

var getTimestamp = function getTimestamp(t) {
  return +getDateObject(t);
};
/**
 * milliseconds (thousandths of a second)
 */


var expireCallback = function expireCallback(createTime, expireMilliseconds, run, expireCb) {
  var now = getTimestamp();
  var isExpire = true;

  if (null != createTime && !isNaN(createTime)) {
    if (!expireMilliseconds || now - createTime <= expireMilliseconds) {
      isExpire = false;
    }
  }

  return isExpire ? callfunc(expireCb) : callfunc(run);
};

var sn = {};

var getSN = function getSN(name) {
  var _sn$name;

  sn[name] = (_sn$name = sn[name]) !== null && _sn$name !== void 0 ? _sn$name : 0;
  return (name || "") + "_" + sn[name]++;
};

var getRandom = function getRandom() {
  return getTimestamp() + "" + Math.random();
};

export default getRandom;
export { expireCallback, getDateObject, getTimestamp, getSN };