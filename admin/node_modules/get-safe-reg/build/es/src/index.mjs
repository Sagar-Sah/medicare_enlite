var esc = /[|\\{}()[\]^$+*?.]/g;

var text = function text(txt) {
  return txt ? txt + "" : "";
};

var getSafeReg = function getSafeReg(regString) {
  return text(regString).replace(esc, "\\$&");
};

var cacheReg = function cacheReg(cache) {
  return function (getRegCallback, flags) {
    return function (regString) {
      if (!cache[regString]) {
        var cookRegString = getRegCallback ? getRegCallback(regString) : regString;
        cache[regString] = new RegExp(cookRegString, flags);
      }

      return cache[regString];
    };
  };
};

var safeMatch = function safeMatch(testText, reg) {
  return text(testText).match(reg);
};

export default getSafeReg;
export { cacheReg, safeMatch };