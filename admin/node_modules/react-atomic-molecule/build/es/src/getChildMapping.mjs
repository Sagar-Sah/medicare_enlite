import { Children } from "react";

var bindChildKey = function bindChildKey(children) {
  return Children.map(children, function (c) {
    return c;
  });
};

var getChildMapping = function getChildMapping(children, mapFn) {
  var mapper = function mapper(child, key) {
    return mapFn ? mapFn(child, key) : child;
  };

  var result = {};

  if (children) {
    /**
     * Hack for https://fb.me/react-warning-keys
     * Each child in an array or iterator should have a unique "key"
     * map for auto assign child.key
     */
    bindChildKey(children).forEach(function (child) {
      if (!child) {
        return;
      }

      result[child.key] = mapper(child, child.key);
    });
  }

  return result;
};

export default getChildMapping;
export { bindChildKey };