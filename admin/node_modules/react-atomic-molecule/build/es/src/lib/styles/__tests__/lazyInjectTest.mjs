import { expect } from "chai";
import query from "css-query-selector";
import lazyInject from "../lazyInject.mjs";
import stylesToCSS from "../stylesToCSS.mjs";
import store from "../store.mjs";
import getStyleTagId from "../getStyleTagId.mjs";
import cleanStyleTag from "../cleanStyleTag.mjs";
describe("Test lazyInject", function () {
  beforeEach(function () {
    store.counter = 0;
    store.registry = {};
  });
  var InjectStyles = {
    fakeKeyframe: [[{
      transform: ["rotateZ(0deg)"]
    }, {
      transform: ["rotateZ(360deg)"]
    }], ["@keyframes spin", "0%", "100%"]]
  };
  it("test keyframe", function () {
    var injects;
    injects = lazyInject(InjectStyles, injects);
    expect(JSON.stringify(store.registry)).to.have.string("@keyframes spin");
  });
  it("test clean store", function () {
    var injects;
    injects = lazyInject(InjectStyles, injects);
    var id = getStyleTagId(injects.fakeKeyframe.styleId);
    var styleDom = query.one("#" + id);
    expect(!!styleDom).to.be.true;
    cleanStyleTag(injects);
    var styleDom2 = query.one("#" + id);
    expect(!!styleDom2).to.be.false;
  });
});