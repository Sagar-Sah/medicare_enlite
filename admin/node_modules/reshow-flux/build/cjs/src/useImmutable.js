"use strict";

var _interopRequireDefault = require("reshow-runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports["default"] = void 0;

var _react = require("react");

var _useStore = _interopRequireDefault(require("./useStore.js"));

var _ImmutableStore = _interopRequireDefault(require("./ImmutableStore.js"));

/**
 * useState alternative but implement by Immutable.
 * https://reactjs.org/docs/hooks-reference.html#usestate
 *
 *
 * ## Base usage
 * const [state, setState] = useImmutable(initialState);
 *
 * call setState will trigger re-render.
 * could use setState for partial update.
 */
var useImmutable = function useImmutable(initialState) {
  var lastReduce = (0, _react.useRef)();

  if (!lastReduce.current) {
    lastReduce.current = (0, _ImmutableStore["default"])(null, initialState);
  }

  return [(0, _useStore["default"])(lastReduce.current[0]), lastReduce.current[1]];
};

var _default = useImmutable;
exports["default"] = _default;
module.exports = exports.default;