"use strict";

var _interopRequireDefault = require("reshow-runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports["default"] = void 0;

var _react = require("react");

var _callFunc = _interopRequireDefault(require("call-func"));

var useTimer = function useTimer(interval) {
  var timer = (0, _react.useRef)();
  var act = (0, _react.useMemo)(function () {
    return interval ? {
      run: setInterval,
      stop: clearInterval
    } : {
      run: setTimeout,
      stop: clearTimeout
    };
  }, []);

  var stop = function stop() {
    if (timer.current) {
      (0, _callFunc["default"])(act.stop, [timer.current]);
      timer.current = null;
    }
  };

  (0, _react.useEffect)(function () {
    return function () {
      return stop();
    };
  }, []);

  var run = function run(func, delay) {
    stop();
    timer.current = (0, _callFunc["default"])(act.run, [func, delay]);
  };

  return [run, stop];
};

var _default = useTimer;
exports["default"] = _default;
module.exports = exports.default;