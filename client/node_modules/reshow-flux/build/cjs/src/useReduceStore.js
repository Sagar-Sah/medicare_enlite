"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _react = require("react");

var _reshowFluxBase = require("reshow-flux-base");

var _ImmutableStore = require("./ImmutableStore.js");

/**
 * useReducer alternative for External store.
 * https://reactjs.org/docs/hooks-reference.html#usereducer
 *
 *
 * ## Base usage
 *
 * const [store, dispatch] = useReduceStore(reduceCallback, initial[Map|Function]);
 *
 * Call dispatch will not trigger re-render.
 */
var useReduceStore = function useReduceStore(reduce, initialState) {
  var lastReducer = (0, _react.useRef)();

  if (!lastReducer.current) {
    reduce = reduce || _ImmutableStore.defaultReducer;
    lastReducer.current = (0, _reshowFluxBase.createReducer)(reduce, initialState || (0, _ImmutableStore.Map)());
  }

  return lastReducer.current;
};

var _default = useReduceStore;
exports["default"] = _default;
module.exports = exports.default;