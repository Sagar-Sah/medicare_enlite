"use strict";

var _interopRequireDefault = require("reshow-runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports["default"] = void 0;

var _react = require("react");

var _callFunc = _interopRequireDefault(require("call-func"));

var useSyncState = function useSyncState(initState, setter) {
  if (setter === void 0) {
    setter = _react.useState;
  }

  var lastState = (0, _react.useRef)();

  var _setter = setter(function () {
    lastState.current = (0, _callFunc["default"])(initState);
    return lastState.current;
  }),
      state = _setter[0],
      setState = _setter[1];

  var setSyncState = function setSyncState(nextState) {
    var change = (0, _callFunc["default"])(nextState, [lastState.current]);

    if (lastState.current !== change) {
      lastState.current = setState(change) || change;
    }
  };

  return [state, setSyncState, function () {
    return lastState.current;
  }];
};

var _default = useSyncState;
exports["default"] = _default;
module.exports = exports.default;