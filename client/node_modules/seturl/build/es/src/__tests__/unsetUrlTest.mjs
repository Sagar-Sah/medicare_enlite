import { expect } from "chai";
import gjsdom from "jsdom-global";
import { unsetUrl } from "../index.mjs";
describe("test clean url", function () {
  var reset;
  afterEach(function () {
    reset();
  });
  it("remove first", function () {
    reset = gjsdom(null, {
      url: "http://xxx?abc=def&foo=bar"
    });
    expect(unsetUrl("abc")).to.equal("http://xxx/?&foo=bar");
  });
  it("remove last", function () {
    reset = gjsdom(null, {
      url: "http://xxx?abc=def&foo=bar"
    });
    expect(unsetUrl("foo")).to.equal("http://xxx/?abc=def");
  });
  it("key not exists", function () {
    reset = gjsdom(null, {
      url: "http://xxx?abc=def&foo=bar"
    });
    expect(unsetUrl("bar")).to.equal("http://xxx/?abc=def&foo=bar");
  });
  it("unset multi", function () {
    reset = gjsdom(null, {
      url: "http://xxx?abc=def&foo=bar1&foo=bar2&xxx"
    });
    expect(unsetUrl("foo")).to.equal("http://xxx/?abc=def&xxx");
  });
});